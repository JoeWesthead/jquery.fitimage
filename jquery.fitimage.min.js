(function(a){a.fn.extend({fitImage:function(){return this.each(function(b){var c=a(this);c.load(function(){var l=a(this).parents().andSelf().filter(":hidden"),e=[];l.each(function(){var n=a(this).attr("style");n=typeof n=="undefined"?"":n;e.push(n);a(this).attr("style",n+" display: block !important;")});l.eq(0).css("left",-9999);var g=c.parent().height(),k=c.parent().width(),j=a(this).height(),m=a(this).width(),f=m/k,h=j/g;if(f>=h){$newHeight=g;$newWidth=m/(j/g)}else{$newWidth=k;$newHeight=j/(m/k)}l.eq(0).css("left",0);l.each(function(){a(this).attr("style",e.shift())});a(this).height($newHeight).width($newWidth);var d=Math.round(($newHeight-g)/2);var i=Math.round(($newWidth-k)/2);if(d>0){c.css({position:"relative",top:"-"+d+"px","vertical-align":"bottom"})}if(i>0){c.css({position:"relative",left:"-"+i+"px"})}})})}})})(jQuery);